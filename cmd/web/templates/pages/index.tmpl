{{define "content"}}
    {{block "authentication" .}}{{end}}
    {{block "solverSelection" .}}{{end}}
    {{block "solverUpload" .}}{{end}}
    {{block "solverResult" .}}{{end}}
{{end}}

{{ define "head"}}
  <script src="/static/js/navigation.js" defer></script>
  <script src="/static/js/auth.js"></script>
  <script src="/static/js/helpers.js"></script>
  <script src="/static/js/callSolver.js"></script>
{{ end }}

{{ define "authentication"}}
{{- if .Config.OAuth -}}
<section class="auth active">
  <div id="auth-enabled" data-enabled="true" hidden></div>

  <div class="auth-status-logout">
    <div>
      <strong>Authentication status</strong>: <span id="auth-status">Not Authenticated</span>
    </div>
    <div id="logout-buttons-div" hidden>
      <button id="logoutBtn">Logout</button>
    </div>
  </div> 
  <div id="login-buttons-div">
  </div>
  <script>
    // create OAuth authentication buttons
    const loginButtons = new Map();
    const loginButtonsDiv = document.getElementById("login-buttons-div");
    {{- range .Config.OAuthProviders }}
    loginButtons["{{.Name}}"] = document.createElement("button");
    loginButtons["{{.Name}}"].textContent = "Authenticate via {{.Name}}"
    loginButtons["{{.Name}}"].id = "login-button-{{.Name}}";
    loginButtons["{{.Name}}"].class = "login-button";
    loginButtons["{{.Name}}"].addEventListener("click", () => startOAuth("{{.UserAuth}}"));

    loginButtonsDiv.appendChild(loginButtons["{{.Name}}"]);
    {{- end }}
  </script>
</section>
{{- else -}}
<div id="auth-enabled" data-enabled="false" hidden></div>
{{- end -}}
{{end}}

{{ define "solverSelection"}}
  {{- if .Config.OAuth -}}
<section class="selection disabled">
  {{- else -}}
<section class="selection active">
  {{- end -}}
  <div id="table-header">
    <h2>Table of Solvers</h2>
    <div id="solver-selection" hidden>
        <strong>Current solver selection: </strong><span id="solver-day">None</span> part <span id="solver-part">None</span>
    </div>
  </div>
  <div id="table-container">
    <table>
        <thead>
        <tr>
          <th>Name</th>
          <th>Parts 1</th>
          <th>Parts 2</th>
        </tr>
        </thead>
        <tbody>
            {{- range $item := .RegistryItems }}
            <tr>
                <td class="row-key">{{$item.Name}}</td>
                <td><a href="#" data-day="{{$item.Name}}" data-part="1">Part 1</a></td>
                <td><a href="#" data-day="{{$item.Name}}" data-part="2">Part 2</a></td>
            </tr>
            {{- end }}
        </tbody>
    </table>
  </div>
</section>
{{end}}

{{define "solverUpload"}}
<section class="submission disabled">
  <div id="submit-header">
    <label for="fileInput" class="file-btn">Choose a file</label>
    <span id="fileName" data-default="No file selected">No file selected</span>
    <input type="file" id="fileInput" hidden>
    <button id="inputClear">Clear selection</button>
  </div>
  <div>
    <label for="textInput">Or paste text </label>
    <textarea id="textInput" rows="4" cols="50" style="resize: none;"></textarea>
  </div>
  <div id="submit-btn-div">
    <button id="submitBtn">Send to API</button>
  </div>
</section>
{{end}}

{{define "solverResult"}}
<section class="result disabled">
  <pre id="result"></pre>
  <button id="seenBtn" hidden>Ok</button>
  <button id="resubmitBtn" hidden>Ok</button>
</section>
{{end}}